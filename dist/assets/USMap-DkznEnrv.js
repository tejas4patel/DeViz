import{i as Ee,r as dn,a as fn,j as G,b as _e}from"./index-CuIZEemV.js";import{z as we}from"./zoom-Dn7aPmOf.js";/* empty css                      */function bn(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Me(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Kt(n){let t,i,e;n.length!==2?(t=bn,i=(a,p)=>bn(n(a),p),e=(a,p)=>n(a)-p):(t=n===bn||n===Me?n:Re,i=n,e=n);function r(a,p,u=0,o=a.length){if(u<o){if(t(p,p)!==0)return o;do{const f=u+o>>>1;i(a[f],p)<0?u=f+1:o=f}while(u<o)}return u}function l(a,p,u=0,o=a.length){if(u<o){if(t(p,p)!==0)return o;do{const f=u+o>>>1;i(a[f],p)<=0?u=f+1:o=f}while(u<o)}return u}function c(a,p,u=0,o=a.length){const f=r(a,p,u,o-1);return f>u&&e(a[f-1],p)>-e(a[f],p)?f-1:f}return{left:r,center:c,right:l}}function Re(){return 0}function Ne(n){return n===null?NaN:+n}const xe=Kt(bn),Pe=xe.right;Kt(Ne).center;class sn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const l=i[r],c=t+l,a=Math.abs(t)<Math.abs(l)?t-(c-l):l-(c-t);a&&(i[e++]=a),t=c}return i[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let i=this._n,e,r,l,c=0;if(i>0){for(c=t[--i];i>0&&(e=c,r=t[--i],c=e+r,l=r-(c-e),!l););i>0&&(l<0&&t[i-1]<0||l>0&&t[i-1]>0)&&(r=l*2,e=c+r,r==e-c&&(c=e))}return c}}const $e=Math.sqrt(50),ke=Math.sqrt(10),ze=Math.sqrt(2);function Zn(n,t,i){const e=(t-n)/Math.max(0,i),r=Math.floor(Math.log10(e)),l=e/Math.pow(10,r),c=l>=$e?10:l>=ke?5:l>=ze?2:1;let a,p,u;return r<0?(u=Math.pow(10,-r)/c,a=Math.round(n*u),p=Math.round(t*u),a/u<n&&++a,p/u>t&&--p,u=-u):(u=Math.pow(10,r)*c,a=Math.round(n/u),p=Math.round(t/u),a*u<n&&++a,p*u>t&&--p),p<a&&.5<=i&&i<2?Zn(n,t,i*2):[a,p,u]}function Ce(n,t,i){if(t=+t,n=+n,i=+i,!(i>0))return[];if(n===t)return[n];const e=t<n,[r,l,c]=e?Zn(t,n,i):Zn(n,t,i);if(!(l>=r))return[];const a=l-r+1,p=new Array(a);if(e)if(c<0)for(let u=0;u<a;++u)p[u]=(l-u)/-c;else for(let u=0;u<a;++u)p[u]=(l-u)*c;else if(c<0)for(let u=0;u<a;++u)p[u]=(r+u)/-c;else for(let u=0;u<a;++u)p[u]=(r+u)*c;return p}function et(n,t,i){return t=+t,n=+n,i=+i,Zn(n,t,i)[2]}function Ae(n,t,i){t=+t,n=+n,i=+i;const e=t<n,r=e?et(t,n,i):et(n,t,i);return(e?-1:1)*(r<0?1/-r:r)}function*Fe(n){for(const t of n)yield*t}function Qt(n){return Array.from(Fe(n))}function je(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function qn(n,t){if(!isFinite(n)||n===0)return null;var i=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"),e=n.slice(0,i);return[e.length>1?e[0]+e.slice(2):e,+n.slice(i+1)]}function vn(n){return n=qn(Math.abs(n)),n?n[1]:NaN}function Le(n,t){return function(i,e){for(var r=i.length,l=[],c=0,a=n[0],p=0;r>0&&a>0&&(p+a+1>e&&(a=Math.max(1,e-p)),l.push(i.substring(r-=a,r+a)),!((p+=a+1)>e));)a=n[c=(c+1)%n.length];return l.reverse().join(t)}}function be(n){return function(t){return t.replace(/[0-9]/g,function(i){return n[+i]})}}var Ie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hn(n){if(!(t=Ie.exec(n)))throw new Error("invalid format: "+n);var t;return new yt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Hn.prototype=yt.prototype;function yt(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}yt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Oe(n){n:for(var t=n.length,i=1,e=-1,r;i<t;++i)switch(n[i]){case".":e=r=i;break;case"0":e===0&&(e=i),r=i;break;default:if(!+n[i])break n;e>0&&(e=0);break}return e>0?n.slice(0,e)+n.slice(r+1):n}var Bn;function Ze(n,t){var i=qn(n,t);if(!i)return Bn=void 0,n.toPrecision(t);var e=i[0],r=i[1],l=r-(Bn=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,c=e.length;return l===c?e:l>c?e+new Array(l-c+1).join("0"):l>0?e.slice(0,l)+"."+e.slice(l):"0."+new Array(1-l).join("0")+qn(n,Math.max(0,t+l-1))[0]}function Nt(n,t){var i=qn(n,t);if(!i)return n+"";var e=i[0],r=i[1];return r<0?"0."+new Array(-r).join("0")+e:e.length>r+1?e.slice(0,r+1)+"."+e.slice(r+1):e+new Array(r-e.length+2).join("0")}const xt={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:je,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>Nt(n*100,t),r:Nt,s:Ze,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function Pt(n){return n}var $t=Array.prototype.map,kt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function qe(n){var t=n.grouping===void 0||n.thousands===void 0?Pt:Le($t.call(n.grouping,Number),n.thousands+""),i=n.currency===void 0?"":n.currency[0]+"",e=n.currency===void 0?"":n.currency[1]+"",r=n.decimal===void 0?".":n.decimal+"",l=n.numerals===void 0?Pt:be($t.call(n.numerals,String)),c=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"−":n.minus+"",p=n.nan===void 0?"NaN":n.nan+"";function u(f,s){f=Hn(f);var h=f.fill,d=f.align,v=f.sign,m=f.symbol,P=f.zero,w=f.width,R=f.comma,S=f.precision,N=f.trim,E=f.type;E==="n"?(R=!0,E="g"):xt[E]||(S===void 0&&(S=12),N=!0,E="g"),(P||h==="0"&&d==="=")&&(P=!0,h="0",d="=");var L=(s&&s.prefix!==void 0?s.prefix:"")+(m==="$"?i:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():""),z=(m==="$"?e:/[%p]/.test(E)?c:"")+(s&&s.suffix!==void 0?s.suffix:""),y=xt[E],b=/[defgprs%]/.test(E);S=S===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function _(M){var x=L,$=z,g,k,I;if(E==="c")$=y(M)+$,M="";else{M=+M;var F=M<0||1/M<0;if(M=isNaN(M)?p:y(Math.abs(M),S),N&&(M=Oe(M)),F&&+M==0&&v!=="+"&&(F=!1),x=(F?v==="("?v:a:v==="-"||v==="("?"":v)+x,$=(E==="s"&&!isNaN(M)&&Bn!==void 0?kt[8+Bn/3]:"")+$+(F&&v==="("?")":""),b){for(g=-1,k=M.length;++g<k;)if(I=M.charCodeAt(g),48>I||I>57){$=(I===46?r+M.slice(g+1):M.slice(g))+$,M=M.slice(0,g);break}}}R&&!P&&(M=t(M,1/0));var j=x.length+M.length+$.length,H=j<w?new Array(w-j+1).join(h):"";switch(R&&P&&(M=t(H+M,H.length?w-$.length:1/0),H=""),d){case"<":M=x+M+$+H;break;case"=":M=x+H+M+$;break;case"^":M=H.slice(0,j=H.length>>1)+x+M+$+H.slice(j);break;default:M=H+x+M+$;break}return l(M)}return _.toString=function(){return f+""},_}function o(f,s){var h=Math.max(-8,Math.min(8,Math.floor(vn(s)/3)))*3,d=Math.pow(10,-h),v=u((f=Hn(f),f.type="f",f),{suffix:kt[8+h/3]});return function(m){return v(d*m)}}return{format:u,formatPrefix:o}}var Cn,ne,te;He({thousands:",",grouping:[3],currency:["$",""]});function He(n){return Cn=qe(n),ne=Cn.format,te=Cn.formatPrefix,Cn}function Be(n){return Math.max(0,-vn(Math.abs(n)))}function Ve(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vn(t)/3)))*3-vn(Math.abs(n)))}function Ge(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,vn(t)-vn(n))+1}var A=1e-6,C=Math.PI,Q=C/2,zt=C/4,tn=C*2,rn=180/C,X=C/180,q=Math.abs,Xe=Math.atan,Sn=Math.atan2,B=Math.cos,O=Math.sin,In=Math.sign||function(n){return n>0?1:n<0?-1:0},cn=Math.sqrt;function Ye(n){return n>1?0:n<-1?C:Math.acos(n)}function pn(n){return n>1?Q:n<-1?-Q:Math.asin(n)}function nn(){}function Vn(n,t){n&&At.hasOwnProperty(n.type)&&At[n.type](n,t)}var Ct={Feature:function(n,t){Vn(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,e=-1,r=i.length;++e<r;)Vn(i[e].geometry,t)}},At={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)n=i[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){it(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)it(i[e],t,0)},Polygon:function(n,t){Ft(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)Ft(i[e],t)},GeometryCollection:function(n,t){for(var i=n.geometries,e=-1,r=i.length;++e<r;)Vn(i[e],t)}};function it(n,t,i){var e=-1,r=n.length-i,l;for(t.lineStart();++e<r;)l=n[e],t.point(l[0],l[1],l[2]);t.lineEnd()}function Ft(n,t){var i=-1,e=n.length;for(t.polygonStart();++i<e;)it(n[i],t,1);t.polygonEnd()}function gn(n,t){n&&Ct.hasOwnProperty(n.type)?Ct[n.type](n,t):Vn(n,t)}function rt(n){return[Sn(n[1],n[0]),pn(n[2])]}function yn(n){var t=n[0],i=n[1],e=B(i);return[e*B(t),e*O(t),O(i)]}function An(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Gn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Kn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Fn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function ot(n){var t=cn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function at(n,t){function i(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(i.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),i}function ut(n,t){return q(n)>C&&(n-=Math.round(n/tn)*tn),[n,t]}ut.invert=ut;function Ue(n,t,i){return(n%=tn)?t||i?at(Lt(n),bt(t,i)):Lt(n):t||i?bt(t,i):ut}function jt(n){return function(t,i){return t+=n,q(t)>C&&(t-=Math.round(t/tn)*tn),[t,i]}}function Lt(n){var t=jt(n);return t.invert=jt(-n),t}function bt(n,t){var i=B(n),e=O(n),r=B(t),l=O(t);function c(a,p){var u=B(p),o=B(a)*u,f=O(a)*u,s=O(p),h=s*i+o*e;return[Sn(f*r-h*l,o*i-s*e),pn(h*r+f*l)]}return c.invert=function(a,p){var u=B(p),o=B(a)*u,f=O(a)*u,s=O(p),h=s*r-f*l;return[Sn(f*r+s*l,o*i+h*e),pn(h*i-o*e)]},c}function We(n,t,i,e,r,l){if(i){var c=B(t),a=O(t),p=e*i;r==null?(r=t+e*tn,l=t-p/2):(r=It(c,r),l=It(c,l),(e>0?r<l:r>l)&&(r+=e*tn));for(var u,o=r;e>0?o>l:o<l;o-=p)u=rt([c,-a*B(o),-a*O(o)]),n.point(u[0],u[1])}}function It(n,t){t=yn(t),t[0]-=n,ot(t);var i=Ye(-t[1]);return((-t[2]<0?-i:i)+tn-A)%tn}function ee(){var n=[],t;return{point:function(i,e,r){t.push([i,e,r])},lineStart:function(){n.push(t=[])},lineEnd:nn,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function On(n,t){return q(n[0]-t[0])<A&&q(n[1]-t[1])<A}function jn(n,t,i,e){this.x=n,this.z=t,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function ie(n,t,i,e,r){var l=[],c=[],a,p;if(n.forEach(function(d){if(!((v=d.length-1)<=0)){var v,m=d[0],P=d[v],w;if(On(m,P)){if(!m[2]&&!P[2]){for(r.lineStart(),a=0;a<v;++a)r.point((m=d[a])[0],m[1]);r.lineEnd();return}P[0]+=2*A}l.push(w=new jn(m,d,null,!0)),c.push(w.o=new jn(m,null,w,!1)),l.push(w=new jn(P,d,null,!1)),c.push(w.o=new jn(P,null,w,!0))}}),!!l.length){for(c.sort(t),Ot(l),Ot(c),a=0,p=c.length;a<p;++a)c[a].e=i=!i;for(var u=l[0],o,f;;){for(var s=u,h=!0;s.v;)if((s=s.n)===u)return;o=s.z,r.lineStart();do{if(s.v=s.o.v=!0,s.e){if(h)for(a=0,p=o.length;a<p;++a)r.point((f=o[a])[0],f[1]);else e(s.x,s.n.x,1,r);s=s.n}else{if(h)for(o=s.p.z,a=o.length-1;a>=0;--a)r.point((f=o[a])[0],f[1]);else e(s.x,s.p.x,-1,r);s=s.p}s=s.o,o=s.z,h=!h}while(!s.v);r.lineEnd()}}}function Ot(n){if(t=n.length){for(var t,i=0,e=n[0],r;++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}function Qn(n){return q(n[0])<=C?n[0]:In(n[0])*((q(n[0])+C)%tn-C)}function Te(n,t){var i=Qn(t),e=t[1],r=O(e),l=[O(i),-B(i),0],c=0,a=0,p=new sn;r===1?e=Q+A:r===-1&&(e=-Q-A);for(var u=0,o=n.length;u<o;++u)if(s=(f=n[u]).length)for(var f,s,h=f[s-1],d=Qn(h),v=h[1]/2+zt,m=O(v),P=B(v),w=0;w<s;++w,d=S,m=E,P=L,h=R){var R=f[w],S=Qn(R),N=R[1]/2+zt,E=O(N),L=B(N),z=S-d,y=z>=0?1:-1,b=y*z,_=b>C,M=m*E;if(p.add(Sn(M*y*O(b),P*L+M*B(b))),c+=_?z+y*tn:z,_^d>=i^S>=i){var x=Gn(yn(h),yn(R));ot(x);var $=Gn(l,x);ot($);var g=(_^z>=0?-1:1)*pn($[2]);(e>g||e===g&&(x[0]||x[1]))&&(a+=_^z>=0?1:-1)}}return(c<-A||c<A&&p<-1e-12)^a&1}function re(n,t,i,e){return function(r){var l=t(r),c=ee(),a=t(c),p=!1,u,o,f,s={point:h,lineStart:v,lineEnd:m,polygonStart:function(){s.point=P,s.lineStart=w,s.lineEnd=R,o=[],u=[]},polygonEnd:function(){s.point=h,s.lineStart=v,s.lineEnd=m,o=Qt(o);var S=Te(u,e);o.length?(p||(r.polygonStart(),p=!0),ie(o,Je,S,i,r)):S&&(p||(r.polygonStart(),p=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),p&&(r.polygonEnd(),p=!1),o=u=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function h(S,N){n(S,N)&&r.point(S,N)}function d(S,N){l.point(S,N)}function v(){s.point=d,l.lineStart()}function m(){s.point=h,l.lineEnd()}function P(S,N){f.push([S,N]),a.point(S,N)}function w(){a.lineStart(),f=[]}function R(){P(f[0][0],f[0][1]),a.lineEnd();var S=a.clean(),N=c.result(),E,L=N.length,z,y,b;if(f.pop(),u.push(f),f=null,!!L){if(S&1){if(y=N[0],(z=y.length-1)>0){for(p||(r.polygonStart(),p=!0),r.lineStart(),E=0;E<z;++E)r.point((b=y[E])[0],b[1]);r.lineEnd()}return}L>1&&S&2&&N.push(N.pop().concat(N.shift())),o.push(N.filter(De))}}return s}}function De(n){return n.length>1}function Je(n,t){return((n=n.x)[0]<0?n[1]-Q-A:Q-n[1])-((t=t.x)[0]<0?t[1]-Q-A:Q-t[1])}const Zt=re(function(){return!0},Ke,ni,[-C,-Q]);function Ke(n){var t=NaN,i=NaN,e=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(l,c){var a=l>0?C:-C,p=q(l-t);q(p-C)<A?(n.point(t,i=(i+c)/2>0?Q:-Q),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(a,i),n.point(l,i),r=0):e!==a&&p>=C&&(q(t-e)<A&&(t-=e*A),q(l-a)<A&&(l-=a*A),i=Qe(t,i,l,c),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(a,i),r=0),n.point(t=l,i=c),e=a},lineEnd:function(){n.lineEnd(),t=i=NaN},clean:function(){return 2-r}}}function Qe(n,t,i,e){var r,l,c=O(n-i);return q(c)>A?Xe((O(t)*(l=B(e))*O(i)-O(e)*(r=B(t))*O(n))/(r*l*c)):(t+e)/2}function ni(n,t,i,e){var r;if(n==null)r=i*Q,e.point(-C,r),e.point(0,r),e.point(C,r),e.point(C,0),e.point(C,-r),e.point(0,-r),e.point(-C,-r),e.point(-C,0),e.point(-C,r);else if(q(n[0]-t[0])>A){var l=n[0]<t[0]?C:-C;r=i*l/2,e.point(-l,r),e.point(0,r),e.point(l,r)}else e.point(t[0],t[1])}function ti(n){var t=B(n),i=2*X,e=t>0,r=q(t)>A;function l(o,f,s,h){We(h,n,i,s,o,f)}function c(o,f){return B(o)*B(f)>t}function a(o){var f,s,h,d,v;return{lineStart:function(){d=h=!1,v=1},point:function(m,P){var w=[m,P],R,S=c(m,P),N=e?S?0:u(m,P):S?u(m+(m<0?C:-C),P):0;if(!f&&(d=h=S)&&o.lineStart(),S!==h&&(R=p(f,w),(!R||On(f,R)||On(w,R))&&(w[2]=1)),S!==h)v=0,S?(o.lineStart(),R=p(w,f),o.point(R[0],R[1])):(R=p(f,w),o.point(R[0],R[1],2),o.lineEnd()),f=R;else if(r&&f&&e^S){var E;!(N&s)&&(E=p(w,f,!0))&&(v=0,e?(o.lineStart(),o.point(E[0][0],E[0][1]),o.point(E[1][0],E[1][1]),o.lineEnd()):(o.point(E[1][0],E[1][1]),o.lineEnd(),o.lineStart(),o.point(E[0][0],E[0][1],3)))}S&&(!f||!On(f,w))&&o.point(w[0],w[1]),f=w,h=S,s=N},lineEnd:function(){h&&o.lineEnd(),f=null},clean:function(){return v|(d&&h)<<1}}}function p(o,f,s){var h=yn(o),d=yn(f),v=[1,0,0],m=Gn(h,d),P=An(m,m),w=m[0],R=P-w*w;if(!R)return!s&&o;var S=t*P/R,N=-t*w/R,E=Gn(v,m),L=Fn(v,S),z=Fn(m,N);Kn(L,z);var y=E,b=An(L,y),_=An(y,y),M=b*b-_*(An(L,L)-1);if(!(M<0)){var x=cn(M),$=Fn(y,(-b-x)/_);if(Kn($,L),$=rt($),!s)return $;var g=o[0],k=f[0],I=o[1],F=f[1],j;k<g&&(j=g,g=k,k=j);var H=k-g,U=q(H-C)<A,T=U||H<A;if(!U&&F<I&&(j=I,I=F,F=j),T?U?I+F>0^$[1]<(q($[0]-g)<A?I:F):I<=$[1]&&$[1]<=F:H>C^(g<=$[0]&&$[0]<=k)){var W=Fn(y,(-b+x)/_);return Kn(W,L),[$,rt(W)]}}}function u(o,f){var s=e?n:C-n,h=0;return o<-s?h|=1:o>s&&(h|=2),f<-s?h|=4:f>s&&(h|=8),h}return re(c,a,l,e?[0,-n]:[-C,n-C])}function ei(n,t,i,e,r,l){var c=n[0],a=n[1],p=t[0],u=t[1],o=0,f=1,s=p-c,h=u-a,d;if(d=i-c,!(!s&&d>0)){if(d/=s,s<0){if(d<o)return;d<f&&(f=d)}else if(s>0){if(d>f)return;d>o&&(o=d)}if(d=r-c,!(!s&&d<0)){if(d/=s,s<0){if(d>f)return;d>o&&(o=d)}else if(s>0){if(d<o)return;d<f&&(f=d)}if(d=e-a,!(!h&&d>0)){if(d/=h,h<0){if(d<o)return;d<f&&(f=d)}else if(h>0){if(d>f)return;d>o&&(o=d)}if(d=l-a,!(!h&&d<0)){if(d/=h,h<0){if(d>f)return;d>o&&(o=d)}else if(h>0){if(d<o)return;d<f&&(f=d)}return o>0&&(n[0]=c+o*s,n[1]=a+o*h),f<1&&(t[0]=c+f*s,t[1]=a+f*h),!0}}}}}var wn=1e9,Ln=-wn;function ii(n,t,i,e){function r(u,o){return n<=u&&u<=i&&t<=o&&o<=e}function l(u,o,f,s){var h=0,d=0;if(u==null||(h=c(u,f))!==(d=c(o,f))||p(u,o)<0^f>0)do s.point(h===0||h===3?n:i,h>1?e:t);while((h=(h+f+4)%4)!==d);else s.point(o[0],o[1])}function c(u,o){return q(u[0]-n)<A?o>0?0:3:q(u[0]-i)<A?o>0?2:1:q(u[1]-t)<A?o>0?1:0:o>0?3:2}function a(u,o){return p(u.x,o.x)}function p(u,o){var f=c(u,1),s=c(o,1);return f!==s?f-s:f===0?o[1]-u[1]:f===1?u[0]-o[0]:f===2?u[1]-o[1]:o[0]-u[0]}return function(u){var o=u,f=ee(),s,h,d,v,m,P,w,R,S,N,E,L={point:z,lineStart:M,lineEnd:x,polygonStart:b,polygonEnd:_};function z(g,k){r(g,k)&&o.point(g,k)}function y(){for(var g=0,k=0,I=h.length;k<I;++k)for(var F=h[k],j=1,H=F.length,U=F[0],T,W,Y=U[0],en=U[1];j<H;++j)T=Y,W=en,U=F[j],Y=U[0],en=U[1],W<=e?en>e&&(Y-T)*(e-W)>(en-W)*(n-T)&&++g:en<=e&&(Y-T)*(e-W)<(en-W)*(n-T)&&--g;return g}function b(){o=f,s=[],h=[],E=!0}function _(){var g=y(),k=E&&g,I=(s=Qt(s)).length;(k||I)&&(u.polygonStart(),k&&(u.lineStart(),l(null,null,1,u),u.lineEnd()),I&&ie(s,a,g,l,u),u.polygonEnd()),o=u,s=h=d=null}function M(){L.point=$,h&&h.push(d=[]),N=!0,S=!1,w=R=NaN}function x(){s&&($(v,m),P&&S&&f.rejoin(),s.push(f.result())),L.point=z,S&&o.lineEnd()}function $(g,k){var I=r(g,k);if(h&&d.push([g,k]),N)v=g,m=k,P=I,N=!1,I&&(o.lineStart(),o.point(g,k));else if(I&&S)o.point(g,k);else{var F=[w=Math.max(Ln,Math.min(wn,w)),R=Math.max(Ln,Math.min(wn,R))],j=[g=Math.max(Ln,Math.min(wn,g)),k=Math.max(Ln,Math.min(wn,k))];ei(F,j,n,t,i,e)?(S||(o.lineStart(),o.point(F[0],F[1])),o.point(j[0],j[1]),I||o.lineEnd(),E=!1):I&&(o.lineStart(),o.point(g,k),E=!1)}w=g,R=k,S=I}return L}}const lt=n=>n;var nt=new sn,ct=new sn,oe,ae,ft,st,ln={point:nn,lineStart:nn,lineEnd:nn,polygonStart:function(){ln.lineStart=ri,ln.lineEnd=ai},polygonEnd:function(){ln.lineStart=ln.lineEnd=ln.point=nn,nt.add(q(ct)),ct=new sn},result:function(){var n=nt/2;return nt=new sn,n}};function ri(){ln.point=oi}function oi(n,t){ln.point=ue,oe=ft=n,ae=st=t}function ue(n,t){ct.add(st*n-ft*t),ft=n,st=t}function ai(){ue(oe,ae)}var En=1/0,Xn=En,Pn=-En,Yn=Pn,Un={point:ui,lineStart:nn,lineEnd:nn,polygonStart:nn,polygonEnd:nn,result:function(){var n=[[En,Xn],[Pn,Yn]];return Pn=Yn=-(Xn=En=1/0),n}};function ui(n,t){n<En&&(En=n),n>Pn&&(Pn=n),t<Xn&&(Xn=t),t>Yn&&(Yn=t)}var pt=0,ht=0,Mn=0,Wn=0,Tn=0,mn=0,dt=0,gt=0,Rn=0,le,ce,an,un,K={point:hn,lineStart:qt,lineEnd:Ht,polygonStart:function(){K.lineStart=fi,K.lineEnd=si},polygonEnd:function(){K.point=hn,K.lineStart=qt,K.lineEnd=Ht},result:function(){var n=Rn?[dt/Rn,gt/Rn]:mn?[Wn/mn,Tn/mn]:Mn?[pt/Mn,ht/Mn]:[NaN,NaN];return pt=ht=Mn=Wn=Tn=mn=dt=gt=Rn=0,n}};function hn(n,t){pt+=n,ht+=t,++Mn}function qt(){K.point=li}function li(n,t){K.point=ci,hn(an=n,un=t)}function ci(n,t){var i=n-an,e=t-un,r=cn(i*i+e*e);Wn+=r*(an+n)/2,Tn+=r*(un+t)/2,mn+=r,hn(an=n,un=t)}function Ht(){K.point=hn}function fi(){K.point=pi}function si(){fe(le,ce)}function pi(n,t){K.point=fe,hn(le=an=n,ce=un=t)}function fe(n,t){var i=n-an,e=t-un,r=cn(i*i+e*e);Wn+=r*(an+n)/2,Tn+=r*(un+t)/2,mn+=r,r=un*n-an*t,dt+=r*(an+n),gt+=r*(un+t),Rn+=r*3,hn(an=n,un=t)}function se(n){this._context=n}se.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,tn);break}}},result:nn};var mt=new sn,tt,pe,he,Nn,xn,$n={point:nn,lineStart:function(){$n.point=hi},lineEnd:function(){tt&&de(pe,he),$n.point=nn},polygonStart:function(){tt=!0},polygonEnd:function(){tt=null},result:function(){var n=+mt;return mt=new sn,n}};function hi(n,t){$n.point=de,pe=Nn=n,he=xn=t}function de(n,t){Nn-=n,xn-=t,mt.add(cn(Nn*Nn+xn*xn)),Nn=n,xn=t}let Bt,Dn,Vt,Gt;class Xt{constructor(t){this._append=t==null?ge:di(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,i){switch(this._point){case 0:{this._append`M${t},${i}`,this._point=1;break}case 1:{this._append`L${t},${i}`;break}default:{if(this._append`M${t},${i}`,this._radius!==Vt||this._append!==Dn){const e=this._radius,r=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,Vt=e,Dn=this._append,Gt=this._,this._=r}this._+=Gt;break}}}result(){const t=this._;return this._="",t.length?t:null}}function ge(n){let t=1;this._+=n[0];for(const i=n.length;t<i;++t)this._+=arguments[t]+n[t]}function di(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return ge;if(t!==Bt){const i=10**t;Bt=t,Dn=function(r){let l=1;this._+=r[0];for(const c=r.length;l<c;++l)this._+=Math.round(arguments[l]*i)/i+r[l]}}return Dn}function gi(n,t){let i=3,e=4.5,r,l;function c(a){return a&&(typeof e=="function"&&l.pointRadius(+e.apply(this,arguments)),gn(a,r(l))),l.result()}return c.area=function(a){return gn(a,r(ln)),ln.result()},c.measure=function(a){return gn(a,r($n)),$n.result()},c.bounds=function(a){return gn(a,r(Un)),Un.result()},c.centroid=function(a){return gn(a,r(K)),K.result()},c.projection=function(a){return arguments.length?(r=a==null?(n=null,lt):(n=a).stream,c):n},c.context=function(a){return arguments.length?(l=a==null?(t=null,new Xt(i)):new se(t=a),typeof e!="function"&&l.pointRadius(e),c):t},c.pointRadius=function(a){return arguments.length?(e=typeof a=="function"?a:(l.pointRadius(+a),+a),c):e},c.digits=function(a){if(!arguments.length)return i;if(a==null)i=null;else{const p=Math.floor(a);if(!(p>=0))throw new RangeError(`invalid digits: ${a}`);i=p}return t===null&&(l=new Xt(i)),c},c.projection(n).digits(i).context(t)}function Et(n){return function(t){var i=new vt;for(var e in n)i[e]=n[e];return i.stream=t,i}}function vt(){}vt.prototype={constructor:vt,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _t(n,t,i){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),gn(i,n.stream(Un)),t(Un.result()),e!=null&&n.clipExtent(e),n}function wt(n,t,i){return _t(n,function(e){var r=t[1][0]-t[0][0],l=t[1][1]-t[0][1],c=Math.min(r/(e[1][0]-e[0][0]),l/(e[1][1]-e[0][1])),a=+t[0][0]+(r-c*(e[1][0]+e[0][0]))/2,p=+t[0][1]+(l-c*(e[1][1]+e[0][1]))/2;n.scale(150*c).translate([a,p])},i)}function me(n,t,i){return wt(n,[[0,0],t],i)}function ve(n,t,i){return _t(n,function(e){var r=+t,l=r/(e[1][0]-e[0][0]),c=(r-l*(e[1][0]+e[0][0]))/2,a=-l*e[0][1];n.scale(150*l).translate([c,a])},i)}function Se(n,t,i){return _t(n,function(e){var r=+t,l=r/(e[1][1]-e[0][1]),c=-l*e[0][0],a=(r-l*(e[1][1]+e[0][1]))/2;n.scale(150*l).translate([c,a])},i)}var Yt=16,mi=B(30*X);function Ut(n,t){return+t?Si(n,t):vi(n)}function vi(n){return Et({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function Si(n,t){function i(e,r,l,c,a,p,u,o,f,s,h,d,v,m){var P=u-e,w=o-r,R=P*P+w*w;if(R>4*t&&v--){var S=c+s,N=a+h,E=p+d,L=cn(S*S+N*N+E*E),z=pn(E/=L),y=q(q(E)-1)<A||q(l-f)<A?(l+f)/2:Sn(N,S),b=n(y,z),_=b[0],M=b[1],x=_-e,$=M-r,g=w*x-P*$;(g*g/R>t||q((P*x+w*$)/R-.5)>.3||c*s+a*h+p*d<mi)&&(i(e,r,l,c,a,p,_,M,y,S/=L,N/=L,E,v,m),m.point(_,M),i(_,M,y,S,N,E,u,o,f,s,h,d,v,m))}}return function(e){var r,l,c,a,p,u,o,f,s,h,d,v,m={point:P,lineStart:w,lineEnd:S,polygonStart:function(){e.polygonStart(),m.lineStart=N},polygonEnd:function(){e.polygonEnd(),m.lineStart=w}};function P(z,y){z=n(z,y),e.point(z[0],z[1])}function w(){f=NaN,m.point=R,e.lineStart()}function R(z,y){var b=yn([z,y]),_=n(z,y);i(f,s,o,h,d,v,f=_[0],s=_[1],o=z,h=b[0],d=b[1],v=b[2],Yt,e),e.point(f,s)}function S(){m.point=P,e.lineEnd()}function N(){w(),m.point=E,m.lineEnd=L}function E(z,y){R(r=z,y),l=f,c=s,a=h,p=d,u=v,m.point=R}function L(){i(f,s,o,h,d,v,l,c,r,a,p,u,Yt,e),m.lineEnd=S,S()}return m}}var yi=Et({point:function(n,t){this.stream.point(n*X,t*X)}});function Ei(n){return Et({point:function(t,i){var e=n(t,i);return this.stream.point(e[0],e[1])}})}function _i(n,t,i,e,r){function l(c,a){return c*=e,a*=r,[t+n*c,i-n*a]}return l.invert=function(c,a){return[(c-t)/n*e,(i-a)/n*r]},l}function Wt(n,t,i,e,r,l){if(!l)return _i(n,t,i,e,r);var c=B(l),a=O(l),p=c*n,u=a*n,o=c/n,f=a/n,s=(a*i-c*t)/n,h=(a*t+c*i)/n;function d(v,m){return v*=e,m*=r,[p*v-u*m+t,i-u*v-p*m]}return d.invert=function(v,m){return[e*(o*v-f*m+s),r*(h-f*v-o*m)]},d}function wi(n){var t,i=150,e=480,r=250,l=0,c=0,a=0,p=0,u=0,o,f=0,s=1,h=1,d=null,v=Zt,m=null,P,w,R,S=lt,N=.5,E,L,z,y,b;function _(g){return z(g[0]*X,g[1]*X)}function M(g){return g=z.invert(g[0],g[1]),g&&[g[0]*rn,g[1]*rn]}_.stream=function(g){return y&&b===g?y:y=yi(Ei(o)(v(E(S(b=g)))))},_.preclip=function(g){return arguments.length?(v=g,d=void 0,$()):v},_.postclip=function(g){return arguments.length?(S=g,m=P=w=R=null,$()):S},_.clipAngle=function(g){return arguments.length?(v=+g?ti(d=g*X):(d=null,Zt),$()):d*rn},_.clipExtent=function(g){return arguments.length?(S=g==null?(m=P=w=R=null,lt):ii(m=+g[0][0],P=+g[0][1],w=+g[1][0],R=+g[1][1]),$()):m==null?null:[[m,P],[w,R]]},_.scale=function(g){return arguments.length?(i=+g,x()):i},_.translate=function(g){return arguments.length?(e=+g[0],r=+g[1],x()):[e,r]},_.center=function(g){return arguments.length?(l=g[0]%360*X,c=g[1]%360*X,x()):[l*rn,c*rn]},_.rotate=function(g){return arguments.length?(a=g[0]%360*X,p=g[1]%360*X,u=g.length>2?g[2]%360*X:0,x()):[a*rn,p*rn,u*rn]},_.angle=function(g){return arguments.length?(f=g%360*X,x()):f*rn},_.reflectX=function(g){return arguments.length?(s=g?-1:1,x()):s<0},_.reflectY=function(g){return arguments.length?(h=g?-1:1,x()):h<0},_.precision=function(g){return arguments.length?(E=Ut(L,N=g*g),$()):cn(N)},_.fitExtent=function(g,k){return wt(_,g,k)},_.fitSize=function(g,k){return me(_,g,k)},_.fitWidth=function(g,k){return ve(_,g,k)},_.fitHeight=function(g,k){return Se(_,g,k)};function x(){var g=Wt(i,0,0,s,h,f).apply(null,t(l,c)),k=Wt(i,e-g[0],r-g[1],s,h,f);return o=Ue(a,p,u),L=at(t,k),z=at(o,L),E=Ut(L,N),$()}function $(){return y=b=null,_}return function(){return t=n.apply(this,arguments),_.invert=t.invert&&M,x()}}function Mi(n){var t=0,i=C/3,e=wi(n),r=e(t,i);return r.parallels=function(l){return arguments.length?e(t=l[0]*X,i=l[1]*X):[t*rn,i*rn]},r}function Ri(n){var t=B(n);function i(e,r){return[e*t,O(r)/t]}return i.invert=function(e,r){return[e/t,pn(r*t)]},i}function Ni(n,t){var i=O(n),e=(i+O(t))/2;if(q(e)<A)return Ri(n);var r=1+i*(2*e-i),l=cn(r)/e;function c(a,p){var u=cn(r-2*e*O(p))/e;return[u*O(a*=e),l-u*B(a)]}return c.invert=function(a,p){var u=l-p,o=Sn(a,q(u))*In(u);return u*e<0&&(o-=C*In(a)*In(u)),[o/e,pn((r-(a*a+u*u)*e*e)/(2*e))]},c}function St(){return Mi(Ni).scale(155.424).center([0,33.6442])}function xi(){return St().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Pi(n){var t=n.length;return{point:function(i,e){for(var r=-1;++r<t;)n[r].point(i,e)},sphere:function(){for(var i=-1;++i<t;)n[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)n[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)n[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)n[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)n[i].polygonEnd()}}}function $i(){var n,t,i=xi(),e,r=St().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l,c=St().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,p,u={point:function(s,h){p=[s,h]}};function o(s){var h=s[0],d=s[1];return p=null,e.point(h,d),p||(l.point(h,d),p)||(a.point(h,d),p)}o.invert=function(s){var h=i.scale(),d=i.translate(),v=(s[0]-d[0])/h,m=(s[1]-d[1])/h;return(m>=.12&&m<.234&&v>=-.425&&v<-.214?r:m>=.166&&m<.234&&v>=-.214&&v<-.115?c:i).invert(s)},o.stream=function(s){return n&&t===s?n:n=Pi([i.stream(t=s),r.stream(s),c.stream(s)])},o.precision=function(s){return arguments.length?(i.precision(s),r.precision(s),c.precision(s),f()):i.precision()},o.scale=function(s){return arguments.length?(i.scale(s),r.scale(s*.35),c.scale(s),o.translate(i.translate())):i.scale()},o.translate=function(s){if(!arguments.length)return i.translate();var h=i.scale(),d=+s[0],v=+s[1];return e=i.translate(s).clipExtent([[d-.455*h,v-.238*h],[d+.455*h,v+.238*h]]).stream(u),l=r.translate([d-.307*h,v+.201*h]).clipExtent([[d-.425*h+A,v+.12*h+A],[d-.214*h-A,v+.234*h-A]]).stream(u),a=c.translate([d-.205*h,v+.212*h]).clipExtent([[d-.214*h+A,v+.166*h+A],[d-.115*h-A,v+.234*h-A]]).stream(u),f()},o.fitExtent=function(s,h){return wt(o,s,h)},o.fitSize=function(s,h){return me(o,s,h)},o.fitWidth=function(s,h){return ve(o,s,h)},o.fitHeight=function(s,h){return Se(o,s,h)};function f(){return n=t=null,o}return o.scale(1070)}function ki(n,t,i,e){var r=Ae(n,t,i),l;switch(e=Hn(e??",f"),e.type){case"s":{var c=Math.max(Math.abs(n),Math.abs(t));return e.precision==null&&!isNaN(l=Ve(r,c))&&(e.precision=l),te(e,c)}case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(l=Ge(r,Math.max(Math.abs(n),Math.abs(t))))&&(e.precision=l-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(l=Be(r))&&(e.precision=l-(e.type==="%")*2);break}}return ne(e)}function zi(n){var t=n.domain;return n.ticks=function(i){var e=t();return Ce(e[0],e[e.length-1],i??10)},n.tickFormat=function(i,e){var r=t();return ki(r[0],r[r.length-1],i??10,e)},n.nice=function(i){i==null&&(i=10);var e=t(),r=0,l=e.length-1,c=e[r],a=e[l],p,u,o=10;for(a<c&&(u=c,c=a,a=u,u=r,r=l,l=u);o-- >0;){if(u=et(c,a,i),u===p)return e[r]=c,e[l]=a,t(e);if(u>0)c=Math.floor(c/u)*u,a=Math.ceil(a/u)*u;else if(u<0)c=Math.ceil(c*u)/u,a=Math.floor(a*u)/u;else break;p=u}return n},n}function ye(){var n=0,t=1,i=1,e=[.5],r=[0,1],l;function c(p){return p!=null&&p<=p?r[Pe(e,p,0,i)]:l}function a(){var p=-1;for(e=new Array(i);++p<i;)e[p]=((p+1)*t-(p-i)*n)/(i+1);return c}return c.domain=function(p){return arguments.length?([n,t]=p,n=+n,t=+t,a()):[n,t]},c.range=function(p){return arguments.length?(i=(r=Array.from(p)).length-1,a()):r.slice()},c.invertExtent=function(p){var u=r.indexOf(p);return u<0?[NaN,NaN]:u<1?[n,e[0]]:u>=i?[e[i-1],t]:[e[u-1],e[u]]},c.unknown=function(p){return arguments.length&&(l=p),c},c.thresholds=function(){return e.slice()},c.copy=function(){return ye().domain([n,t]).range(r).unknown(l)},Ee.apply(zi(c),arguments)}function Ci(n){return n}function Ai(n){if(n==null)return Ci;var t,i,e=n.scale[0],r=n.scale[1],l=n.translate[0],c=n.translate[1];return function(a,p){p||(t=i=0);var u=2,o=a.length,f=new Array(o);for(f[0]=(t+=a[0])*e+l,f[1]=(i+=a[1])*r+c;u<o;)f[u]=a[u],++u;return f}}function Fi(n,t){for(var i,e=n.length,r=e-t;r<--e;)i=n[r],n[r++]=n[e],n[e]=i}function Tt(n,t){return typeof t=="string"&&(t=n.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(i){return Dt(n,i)})}:Dt(n,t)}function Dt(n,t){var i=t.id,e=t.bbox,r=t.properties==null?{}:t.properties,l=ji(n,t);return i==null&&e==null?{type:"Feature",properties:r,geometry:l}:e==null?{type:"Feature",id:i,properties:r,geometry:l}:{type:"Feature",id:i,bbox:e,properties:r,geometry:l}}function ji(n,t){var i=Ai(n.transform),e=n.arcs;function r(o,f){f.length&&f.pop();for(var s=e[o<0?~o:o],h=0,d=s.length;h<d;++h)f.push(i(s[h],h));o<0&&Fi(f,d)}function l(o){return i(o)}function c(o){for(var f=[],s=0,h=o.length;s<h;++s)r(o[s],f);return f.length<2&&f.push(f[0]),f}function a(o){for(var f=c(o);f.length<4;)f.push(f[0]);return f}function p(o){return o.map(a)}function u(o){var f=o.type,s;switch(f){case"GeometryCollection":return{type:f,geometries:o.geometries.map(u)};case"Point":s=l(o.coordinates);break;case"MultiPoint":s=o.coordinates.map(l);break;case"LineString":s=c(o.arcs);break;case"MultiLineString":s=o.arcs.map(c);break;case"Polygon":s=p(o.arcs);break;case"MultiPolygon":s=o.arcs.map(p);break;default:return null}return{type:f,coordinates:s}}return u(t)}const Li={backgroundColor:"#f8f9fa",stateStroke:"#2d3748",stateFill:"#e2e8f0",stateStrokeWidth:.5,stateHoverFill:"#cbd5e0",pointColor:"#E64833",pointRadius:2,pointOpacity:.7,pointHoverRadius:4,pointHoverOpacity:1},bi={type:"albersUsa",scale:1e3,translate:[400,300]},Ii={enabled:!0,backgroundColor:"#1a202c",textColor:"#ffffff",borderColor:"#E64833",borderRadius:"4px",padding:"8px 12px",fontSize:"13px"},Oi={enabled:!0,scaleExtent:[1,8],translateExtent:[[-100,-100],[900,700]]},Jt={enabled:!0,colorScheme:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],minValue:0,maxValue:25,opacity:.7};function Bi({data:n,topology:t,countyTopology:i,countyData:e,choroplethConfig:r={},mapStyleConfig:l={},projectionConfig:c={},tooltipConfig:a={},zoomConfig:p={},width:u=960,height:o=600,minWidth:f=800,minHeight:s=500,enableZoom:h=!0,enableTooltip:d=!0,onSiteClick:v,onSiteHover:m,className:P="",tooltipClassName:w=""}){var I;const R=dn.useRef(null),S=dn.useRef(null),N=dn.useRef(null),E=dn.useRef(1),[L,z]=dn.useState(null),y={...Li,...l},b={...bi,...c},_={...Ii,...a},M={...Oi,...p},x={...Jt,...r},$=()=>{if(N.current){const{svg:F,zoom:j}=N.current;F.transition().duration(300).call(j.scaleBy,1.5)}},g=()=>{if(N.current){const{svg:F,zoom:j}=N.current;F.transition().duration(300).call(j.scaleBy,.67)}},k=()=>{if(N.current){const{svg:F,zoom:j}=N.current;F.transition().duration(500).call(j.transform,_e)}};return dn.useEffect(()=>{if(R.current)try{const F=fn(R.current),j=S.current?fn(S.current):null;F.selectAll("*").remove();const H=F.append("g").attr("class","us-map__main-group"),U=$i().scale(b.scale||1e3).translate(b.translate||[u/2,o/2]),T=gi().projection(U);if(i&&e&&x.enabled){const Z=Tt(i,i.objects.counties),V=ye().domain([x.minValue||0,x.maxValue||25]).range(x.colorScheme||Jt.colorScheme);H.append("g").attr("class","us-map__counties").selectAll("path").data(Z.features).join("path").attr("class","us-map__county").attr("d",T).attr("fill",D=>{const J=D.id,on=e[J];return on?V(on.povertyRate):"#e2e8f0"}).attr("opacity",x.opacity||.7).attr("stroke","#fff").attr("stroke-width",.25)}const W=Tt(t,t.objects.states);H.append("g").attr("class","us-map__states").selectAll("path").data(W.features).join("path").attr("class","us-map__state").attr("d",T).attr("fill",i&&e&&x.enabled?"none":y.stateFill).attr("stroke",y.stateStroke).attr("stroke-width",i&&e&&x.enabled?1.5:y.stateStrokeWidth).on("mouseenter",function(){y.stateHoverFill&&!(i&&e&&x.enabled)&&fn(this).attr("fill",y.stateHoverFill)}).on("mouseleave",function(){i&&e&&x.enabled||fn(this).attr("fill",y.stateFill)});const Y=H.append("g").attr("class","us-map__points"),en=n.sites.map(Z=>{const V=U(Z.coordinates);return V?{site:Z,px:V[0],py:V[1]}:null}).filter(Z=>Z!==null),Mt=8;if(Y.selectAll("circle.us-map__point-hit").data(en).join("circle").attr("class","us-map__point-hit").attr("cx",Z=>Z.px).attr("cy",Z=>Z.py).attr("r",Mt).attr("data-target-r",Mt).attr("fill","transparent").attr("opacity",0).style("cursor","pointer").on("mouseenter",function(Z,V){const D=E.current,J=en.indexOf(V),on=fn(Y.selectAll("circle.us-map__point").nodes()[J]);y.pointHoverRadius&&on.attr("r",y.pointHoverRadius/D).attr("data-target-r",y.pointHoverRadius),y.pointHoverOpacity!==void 0&&on.attr("opacity",y.pointHoverOpacity),on.attr("stroke-width",2.5/D).attr("stroke","#2d3748"),d&&j&&j.style("opacity","1").classed("us-map__tooltip--visible",!0).html(`
                  <div class="us-map__tooltip-content">
                    <div class="us-map__tooltip-name">${V.site.name}</div>
                    <div class="us-map__tooltip-detail">${V.site.address}</div>
                    <div class="us-map__tooltip-detail">${V.site.county}, ${V.site.state}</div>
                  </div>
                `),m&&m(V.site)}).on("mousemove",function(Z){var V;if(d&&j&&((V=R.current)!=null&&V.parentElement)){const J=R.current.parentElement.getBoundingClientRect(),on=j.node();if(on){const Rt=on.getBoundingClientRect(),kn=15,zn=10;let _n=Z.pageX-J.left+kn,Jn=Z.pageY-J.top-kn;_n+Rt.width>J.width-zn&&(_n=Z.pageX-J.left-Rt.width-kn),Jn<zn&&(Jn=Z.pageY-J.top+kn),_n<zn&&(_n=zn),j.style("left",`${_n}px`).style("top",`${Jn}px`)}}}).on("mouseleave",function(Z,V){const D=E.current,J=en.indexOf(V);fn(Y.selectAll("circle.us-map__point").nodes()[J]).attr("r",y.pointRadius/D).attr("data-target-r",y.pointRadius).attr("opacity",y.pointOpacity).attr("stroke-width",1.5/D).attr("stroke","#718096"),d&&j&&j.style("opacity","0").classed("us-map__tooltip--visible",!1),m&&m(null)}).on("click",function(Z,V){v&&v(V.site)}),Y.selectAll("circle.us-map__point").data(en).join("circle").attr("class","us-map__point").attr("cx",Z=>Z.px).attr("cy",Z=>Z.py).attr("r",y.pointRadius).attr("data-target-r",y.pointRadius).attr("fill",y.pointColor).attr("opacity",y.pointOpacity).attr("stroke","#718096").attr("stroke-width",1.5).style("pointer-events","none"),h){const Z=we().scaleExtent(M.scaleExtent||[1,8]).translateExtent(M.translateExtent||[[-100,-100],[u+100,o+100]]).on("zoom",V=>{const D=V.transform.k;E.current=D,H.attr("transform",V.transform.toString()),Y.selectAll("circle").attr("r",function(){return parseFloat(fn(this).attr("data-target-r")||y.pointRadius.toString())/D}),Y.selectAll("circle.us-map__point").attr("stroke-width",1.5/D)});F.call(Z),N.current={zoom:Z,svg:F,g:H}}}catch(F){console.error("Error rendering map:",F),z("Failed to render map")}},[n,t,i,e,u,o,y,b,_,M,x,h,d,v,m]),L?G.jsx("div",{className:"us-map__error",children:L}):G.jsxs("div",{className:`us-map ${P}`.trim(),children:[h&&G.jsxs("div",{className:"us-map__zoom-controls",children:[G.jsx("button",{className:"us-map__zoom-button",onClick:$,title:"Zoom in","aria-label":"Zoom in",children:"+"}),G.jsx("button",{className:"us-map__zoom-button",onClick:g,title:"Zoom out","aria-label":"Zoom out",children:"−"}),G.jsx("div",{className:"us-map__zoom-divider"}),G.jsx("button",{className:"us-map__zoom-button",onClick:k,title:"Reset zoom","aria-label":"Reset zoom",style:{fontSize:"14px"},children:"⟲"})]}),G.jsx("svg",{ref:R,className:"us-map__svg",width:u,height:o,style:{minWidth:`${f}px`,minHeight:`${s}px`,backgroundColor:y.backgroundColor}}),d&&G.jsx("div",{ref:S,className:`us-map__tooltip ${w}`.trim(),style:{backgroundColor:_.backgroundColor,color:_.textColor,border:`1px solid ${_.borderColor}`,borderRadius:_.borderRadius,padding:_.padding,fontSize:_.fontSize}}),i&&e&&x.enabled&&G.jsxs("div",{className:"us-map__legend",children:[G.jsx("div",{className:"us-map__legend-title",children:"County Poverty Rate (%)"}),G.jsx("div",{className:"us-map__legend-scale",children:(I=x.colorScheme)==null?void 0:I.map((F,j)=>{var Y;const H=x.minValue||0,T=((x.maxValue||25)-H)/(((Y=x.colorScheme)==null?void 0:Y.length)||1),W=H+T*j;return G.jsxs("div",{className:"us-map__legend-item",children:[G.jsx("div",{className:"us-map__legend-color",style:{backgroundColor:F}}),G.jsx("div",{className:"us-map__legend-label",children:W.toFixed(0)})]},j)})})]})]})}export{Bi as U};
