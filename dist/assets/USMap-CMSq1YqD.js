import{i as gi,r as dn,a as cn,j as B,b as mi}from"./index-BOv0QOhk.js";import{p as vi,z as Si}from"./zoom-Bqrb7LPs.js";/* empty css                      */function Fn(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function yi(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Wt(n){let t,e,i;n.length!==2?(t=Fn,e=(a,p)=>Fn(n(a),p),i=(a,p)=>n(a)-p):(t=n===Fn||n===yi?n:Ei,e=n,i=n);function r(a,p,u=0,o=a.length){if(u<o){if(t(p,p)!==0)return o;do{const f=u+o>>>1;e(a[f],p)<0?u=f+1:o=f}while(u<o)}return u}function l(a,p,u=0,o=a.length){if(u<o){if(t(p,p)!==0)return o;do{const f=u+o>>>1;e(a[f],p)<=0?u=f+1:o=f}while(u<o)}return u}function c(a,p,u=0,o=a.length){const f=r(a,p,u,o-1);return f>u&&i(a[f-1],p)>-i(a[f],p)?f-1:f}return{left:r,center:c,right:l}}function Ei(){return 0}function _i(n){return n===null?NaN:+n}const wi=Wt(Fn),Mi=wi.right;Wt(_i).center;class fn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const l=e[r],c=t+l,a=Math.abs(t)<Math.abs(l)?t-(c-l):l-(c-t);a&&(e[i++]=a),t=c}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,l,c=0;if(e>0){for(c=t[--e];e>0&&(i=c,r=t[--e],c=i+r,l=r-(c-i),!l););e>0&&(l<0&&t[e-1]<0||l>0&&t[e-1]>0)&&(r=l*2,i=c+r,r==i-c&&(c=i))}return c}}const xi=Math.sqrt(50),Ni=Math.sqrt(10),Ri=Math.sqrt(2);function Ln(n,t,e){const i=(t-n)/Math.max(0,e),r=Math.floor(Math.log10(i)),l=i/Math.pow(10,r),c=l>=xi?10:l>=Ni?5:l>=Ri?2:1;let a,p,u;return r<0?(u=Math.pow(10,-r)/c,a=Math.round(n*u),p=Math.round(t*u),a/u<n&&++a,p/u>t&&--p,u=-u):(u=Math.pow(10,r)*c,a=Math.round(n/u),p=Math.round(t/u),a*u<n&&++a,p*u>t&&--p),p<a&&.5<=e&&e<2?Ln(n,t,e*2):[a,p,u]}function Pi(n,t,e){if(t=+t,n=+n,e=+e,!(e>0))return[];if(n===t)return[n];const i=t<n,[r,l,c]=i?Ln(t,n,e):Ln(n,t,e);if(!(l>=r))return[];const a=l-r+1,p=new Array(a);if(i)if(c<0)for(let u=0;u<a;++u)p[u]=(l-u)/-c;else for(let u=0;u<a;++u)p[u]=(l-u)*c;else if(c<0)for(let u=0;u<a;++u)p[u]=(r+u)/-c;else for(let u=0;u<a;++u)p[u]=(r+u)*c;return p}function Kn(n,t,e){return t=+t,n=+n,e=+e,Ln(n,t,e)[2]}function $i(n,t,e){t=+t,n=+n,e=+e;const i=t<n,r=i?Kn(t,n,e):Kn(n,t,e);return(i?-1:1)*(r<0?1/-r:r)}function*ki(n){for(const t of n)yield*t}function Yt(n){return Array.from(ki(n))}function zi(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function In(n,t){if(!isFinite(n)||n===0)return null;var e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"),i=n.slice(0,e);return[i.length>1?i[0]+i.slice(2):i,+n.slice(e+1)]}function vn(n){return n=In(Math.abs(n)),n?n[1]:NaN}function Ci(n,t){return function(e,i){for(var r=e.length,l=[],c=0,a=n[0],p=0;r>0&&a>0&&(p+a+1>i&&(a=Math.max(1,i-p)),l.push(e.substring(r-=a,r+a)),!((p+=a+1)>i));)a=n[c=(c+1)%n.length];return l.reverse().join(t)}}function Ai(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e]})}}var Fi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function On(n){if(!(t=Fi.exec(n)))throw new Error("invalid format: "+n);var t;return new gt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}On.prototype=gt.prototype;function gt(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}gt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ji(n){n:for(var t=n.length,e=1,i=-1,r;e<t;++e)switch(n[e]){case".":i=r=e;break;case"0":i===0&&(i=e),r=e;break;default:if(!+n[e])break n;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(r+1):n}var Zn;function bi(n,t){var e=In(n,t);if(!e)return Zn=void 0,n.toPrecision(t);var i=e[0],r=e[1],l=r-(Zn=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,c=i.length;return l===c?i:l>c?i+new Array(l-c+1).join("0"):l>0?i.slice(0,l)+"."+i.slice(l):"0."+new Array(1-l).join("0")+In(n,Math.max(0,t+l-1))[0]}function Et(n,t){var e=In(n,t);if(!e)return n+"";var i=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const _t={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:zi,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>Et(n*100,t),r:Et,s:bi,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function wt(n){return n}var Mt=Array.prototype.map,xt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Li(n){var t=n.grouping===void 0||n.thousands===void 0?wt:Ci(Mt.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",r=n.decimal===void 0?".":n.decimal+"",l=n.numerals===void 0?wt:Ai(Mt.call(n.numerals,String)),c=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"−":n.minus+"",p=n.nan===void 0?"NaN":n.nan+"";function u(f,s){f=On(f);var h=f.fill,d=f.align,v=f.sign,m=f.symbol,P=f.zero,w=f.width,x=f.comma,S=f.precision,N=f.trim,E=f.type;E==="n"?(x=!0,E="g"):_t[E]||(S===void 0&&(S=12),N=!0,E="g"),(P||h==="0"&&d==="=")&&(P=!0,h="0",d="=");var b=(s&&s.prefix!==void 0?s.prefix:"")+(m==="$"?e:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():""),z=(m==="$"?i:/[%p]/.test(E)?c:"")+(s&&s.suffix!==void 0?s.suffix:""),y=_t[E],L=/[defgprs%]/.test(E);S=S===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function _(M){var R=b,$=z,g,k,I;if(E==="c")$=y(M)+$,M="";else{M=+M;var F=M<0||1/M<0;if(M=isNaN(M)?p:y(Math.abs(M),S),N&&(M=ji(M)),F&&+M==0&&v!=="+"&&(F=!1),R=(F?v==="("?v:a:v==="-"||v==="("?"":v)+R,$=(E==="s"&&!isNaN(M)&&Zn!==void 0?xt[8+Zn/3]:"")+$+(F&&v==="("?")":""),L){for(g=-1,k=M.length;++g<k;)if(I=M.charCodeAt(g),48>I||I>57){$=(I===46?r+M.slice(g+1):M.slice(g))+$,M=M.slice(0,g);break}}}x&&!P&&(M=t(M,1/0));var j=R.length+M.length+$.length,q=j<w?new Array(w-j+1).join(h):"";switch(x&&P&&(M=t(q+M,q.length?w-$.length:1/0),q=""),d){case"<":M=R+M+$+q;break;case"=":M=R+q+M+$;break;case"^":M=q.slice(0,j=q.length>>1)+R+M+$+q.slice(j);break;default:M=q+R+M+$;break}return l(M)}return _.toString=function(){return f+""},_}function o(f,s){var h=Math.max(-8,Math.min(8,Math.floor(vn(s)/3)))*3,d=Math.pow(10,-h),v=u((f=On(f),f.type="f",f),{suffix:xt[8+h/3]});return function(m){return v(d*m)}}return{format:u,formatPrefix:o}}var $n,Tt,Dt;Ii({thousands:",",grouping:[3],currency:["$",""]});function Ii(n){return $n=Li(n),Tt=$n.format,Dt=$n.formatPrefix,$n}function Oi(n){return Math.max(0,-vn(Math.abs(n)))}function Zi(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vn(t)/3)))*3-vn(Math.abs(n)))}function qi(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,vn(t)-vn(n))+1}var A=1e-6,C=Math.PI,K=C/2,Nt=C/4,nn=C*2,en=180/C,X=C/180,Z=Math.abs,Hi=Math.atan,Sn=Math.atan2,H=Math.cos,O=Math.sin,jn=Math.sign||function(n){return n>0?1:n<0?-1:0},un=Math.sqrt;function Vi(n){return n>1?0:n<-1?C:Math.acos(n)}function sn(n){return n>1?K:n<-1?-K:Math.asin(n)}function Q(){}function qn(n,t){n&&Pt.hasOwnProperty(n.type)&&Pt[n.type](n,t)}var Rt={Feature:function(n,t){qn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)qn(e[i].geometry,t)}},Pt={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){Qn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Qn(e[i],t,0)},Polygon:function(n,t){$t(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)$t(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)qn(e[i],t)}};function Qn(n,t,e){var i=-1,r=n.length-e,l;for(t.lineStart();++i<r;)l=n[i],t.point(l[0],l[1],l[2]);t.lineEnd()}function $t(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)Qn(n[e],t,1);t.polygonEnd()}function gn(n,t){n&&Rt.hasOwnProperty(n.type)?Rt[n.type](n,t):qn(n,t)}function nt(n){return[Sn(n[1],n[0]),sn(n[2])]}function yn(n){var t=n[0],e=n[1],i=H(e);return[i*H(t),i*O(t),O(e)]}function kn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Hn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Yn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function zn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function tt(n){var t=un(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function it(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function et(n,t){return Z(n)>C&&(n-=Math.round(n/nn)*nn),[n,t]}et.invert=et;function Gi(n,t,e){return(n%=nn)?t||e?it(zt(n),Ct(t,e)):zt(n):t||e?Ct(t,e):et}function kt(n){return function(t,e){return t+=n,Z(t)>C&&(t-=Math.round(t/nn)*nn),[t,e]}}function zt(n){var t=kt(n);return t.invert=kt(-n),t}function Ct(n,t){var e=H(n),i=O(n),r=H(t),l=O(t);function c(a,p){var u=H(p),o=H(a)*u,f=O(a)*u,s=O(p),h=s*e+o*i;return[Sn(f*r-h*l,o*e-s*i),sn(h*r+f*l)]}return c.invert=function(a,p){var u=H(p),o=H(a)*u,f=O(a)*u,s=O(p),h=s*r-f*l;return[Sn(f*r+s*l,o*e+h*i),sn(h*e-o*i)]},c}function Bi(n,t,e,i,r,l){if(e){var c=H(t),a=O(t),p=i*e;r==null?(r=t+i*nn,l=t-p/2):(r=At(c,r),l=At(c,l),(i>0?r<l:r>l)&&(r+=i*nn));for(var u,o=r;i>0?o>l:o<l;o-=p)u=nt([c,-a*H(o),-a*O(o)]),n.point(u[0],u[1])}}function At(n,t){t=yn(t),t[0]-=n,tt(t);var e=Vi(-t[1]);return((-t[2]<0?-e:e)+nn-A)%nn}function Jt(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:Q,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function bn(n,t){return Z(n[0]-t[0])<A&&Z(n[1]-t[1])<A}function Cn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Kt(n,t,e,i,r){var l=[],c=[],a,p;if(n.forEach(function(d){if(!((v=d.length-1)<=0)){var v,m=d[0],P=d[v],w;if(bn(m,P)){if(!m[2]&&!P[2]){for(r.lineStart(),a=0;a<v;++a)r.point((m=d[a])[0],m[1]);r.lineEnd();return}P[0]+=2*A}l.push(w=new Cn(m,d,null,!0)),c.push(w.o=new Cn(m,null,w,!1)),l.push(w=new Cn(P,d,null,!1)),c.push(w.o=new Cn(P,null,w,!0))}}),!!l.length){for(c.sort(t),Ft(l),Ft(c),a=0,p=c.length;a<p;++a)c[a].e=e=!e;for(var u=l[0],o,f;;){for(var s=u,h=!0;s.v;)if((s=s.n)===u)return;o=s.z,r.lineStart();do{if(s.v=s.o.v=!0,s.e){if(h)for(a=0,p=o.length;a<p;++a)r.point((f=o[a])[0],f[1]);else i(s.x,s.n.x,1,r);s=s.n}else{if(h)for(o=s.p.z,a=o.length-1;a>=0;--a)r.point((f=o[a])[0],f[1]);else i(s.x,s.p.x,-1,r);s=s.p}s=s.o,o=s.z,h=!h}while(!s.v);r.lineEnd()}}}function Ft(n){if(t=n.length){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function Tn(n){return Z(n[0])<=C?n[0]:jn(n[0])*((Z(n[0])+C)%nn-C)}function Xi(n,t){var e=Tn(t),i=t[1],r=O(i),l=[O(e),-H(e),0],c=0,a=0,p=new fn;r===1?i=K+A:r===-1&&(i=-K-A);for(var u=0,o=n.length;u<o;++u)if(s=(f=n[u]).length)for(var f,s,h=f[s-1],d=Tn(h),v=h[1]/2+Nt,m=O(v),P=H(v),w=0;w<s;++w,d=S,m=E,P=b,h=x){var x=f[w],S=Tn(x),N=x[1]/2+Nt,E=O(N),b=H(N),z=S-d,y=z>=0?1:-1,L=y*z,_=L>C,M=m*E;if(p.add(Sn(M*y*O(L),P*b+M*H(L))),c+=_?z+y*nn:z,_^d>=e^S>=e){var R=Hn(yn(h),yn(x));tt(R);var $=Hn(l,R);tt($);var g=(_^z>=0?-1:1)*sn($[2]);(i>g||i===g&&(R[0]||R[1]))&&(a+=_^z>=0?1:-1)}}return(c<-A||c<A&&p<-1e-12)^a&1}function Qt(n,t,e,i){return function(r){var l=t(r),c=Jt(),a=t(c),p=!1,u,o,f,s={point:h,lineStart:v,lineEnd:m,polygonStart:function(){s.point=P,s.lineStart=w,s.lineEnd=x,o=[],u=[]},polygonEnd:function(){s.point=h,s.lineStart=v,s.lineEnd=m,o=Yt(o);var S=Xi(u,i);o.length?(p||(r.polygonStart(),p=!0),Kt(o,Wi,S,e,r)):S&&(p||(r.polygonStart(),p=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),p&&(r.polygonEnd(),p=!1),o=u=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function h(S,N){n(S,N)&&r.point(S,N)}function d(S,N){l.point(S,N)}function v(){s.point=d,l.lineStart()}function m(){s.point=h,l.lineEnd()}function P(S,N){f.push([S,N]),a.point(S,N)}function w(){a.lineStart(),f=[]}function x(){P(f[0][0],f[0][1]),a.lineEnd();var S=a.clean(),N=c.result(),E,b=N.length,z,y,L;if(f.pop(),u.push(f),f=null,!!b){if(S&1){if(y=N[0],(z=y.length-1)>0){for(p||(r.polygonStart(),p=!0),r.lineStart(),E=0;E<z;++E)r.point((L=y[E])[0],L[1]);r.lineEnd()}return}b>1&&S&2&&N.push(N.pop().concat(N.shift())),o.push(N.filter(Ui))}}return s}}function Ui(n){return n.length>1}function Wi(n,t){return((n=n.x)[0]<0?n[1]-K-A:K-n[1])-((t=t.x)[0]<0?t[1]-K-A:K-t[1])}const jt=Qt(function(){return!0},Yi,Di,[-C,-K]);function Yi(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(l,c){var a=l>0?C:-C,p=Z(l-t);Z(p-C)<A?(n.point(t,e=(e+c)/2>0?K:-K),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),n.point(l,e),r=0):i!==a&&p>=C&&(Z(t-i)<A&&(t-=i*A),Z(l-a)<A&&(l-=a*A),e=Ti(t,e,l,c),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),r=0),n.point(t=l,e=c),i=a},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function Ti(n,t,e,i){var r,l,c=O(n-e);return Z(c)>A?Hi((O(t)*(l=H(i))*O(e)-O(i)*(r=H(t))*O(n))/(r*l*c)):(t+i)/2}function Di(n,t,e,i){var r;if(n==null)r=e*K,i.point(-C,r),i.point(0,r),i.point(C,r),i.point(C,0),i.point(C,-r),i.point(0,-r),i.point(-C,-r),i.point(-C,0),i.point(-C,r);else if(Z(n[0]-t[0])>A){var l=n[0]<t[0]?C:-C;r=e*l/2,i.point(-l,r),i.point(0,r),i.point(l,r)}else i.point(t[0],t[1])}function Ji(n){var t=H(n),e=2*X,i=t>0,r=Z(t)>A;function l(o,f,s,h){Bi(h,n,e,s,o,f)}function c(o,f){return H(o)*H(f)>t}function a(o){var f,s,h,d,v;return{lineStart:function(){d=h=!1,v=1},point:function(m,P){var w=[m,P],x,S=c(m,P),N=i?S?0:u(m,P):S?u(m+(m<0?C:-C),P):0;if(!f&&(d=h=S)&&o.lineStart(),S!==h&&(x=p(f,w),(!x||bn(f,x)||bn(w,x))&&(w[2]=1)),S!==h)v=0,S?(o.lineStart(),x=p(w,f),o.point(x[0],x[1])):(x=p(f,w),o.point(x[0],x[1],2),o.lineEnd()),f=x;else if(r&&f&&i^S){var E;!(N&s)&&(E=p(w,f,!0))&&(v=0,i?(o.lineStart(),o.point(E[0][0],E[0][1]),o.point(E[1][0],E[1][1]),o.lineEnd()):(o.point(E[1][0],E[1][1]),o.lineEnd(),o.lineStart(),o.point(E[0][0],E[0][1],3)))}S&&(!f||!bn(f,w))&&o.point(w[0],w[1]),f=w,h=S,s=N},lineEnd:function(){h&&o.lineEnd(),f=null},clean:function(){return v|(d&&h)<<1}}}function p(o,f,s){var h=yn(o),d=yn(f),v=[1,0,0],m=Hn(h,d),P=kn(m,m),w=m[0],x=P-w*w;if(!x)return!s&&o;var S=t*P/x,N=-t*w/x,E=Hn(v,m),b=zn(v,S),z=zn(m,N);Yn(b,z);var y=E,L=kn(b,y),_=kn(y,y),M=L*L-_*(kn(b,b)-1);if(!(M<0)){var R=un(M),$=zn(y,(-L-R)/_);if(Yn($,b),$=nt($),!s)return $;var g=o[0],k=f[0],I=o[1],F=f[1],j;k<g&&(j=g,g=k,k=j);var q=k-g,W=Z(q-C)<A,D=W||q<A;if(!W&&F<I&&(j=I,I=F,F=j),D?W?I+F>0^$[1]<(Z($[0]-g)<A?I:F):I<=$[1]&&$[1]<=F:q>C^(g<=$[0]&&$[0]<=k)){var Y=zn(y,(-L+R)/_);return Yn(Y,b),[$,nt(Y)]}}}function u(o,f){var s=i?n:C-n,h=0;return o<-s?h|=1:o>s&&(h|=2),f<-s?h|=4:f>s&&(h|=8),h}return Qt(c,a,l,i?[0,-n]:[-C,n-C])}function Ki(n,t,e,i,r,l){var c=n[0],a=n[1],p=t[0],u=t[1],o=0,f=1,s=p-c,h=u-a,d;if(d=e-c,!(!s&&d>0)){if(d/=s,s<0){if(d<o)return;d<f&&(f=d)}else if(s>0){if(d>f)return;d>o&&(o=d)}if(d=r-c,!(!s&&d<0)){if(d/=s,s<0){if(d>f)return;d>o&&(o=d)}else if(s>0){if(d<o)return;d<f&&(f=d)}if(d=i-a,!(!h&&d>0)){if(d/=h,h<0){if(d<o)return;d<f&&(f=d)}else if(h>0){if(d>f)return;d>o&&(o=d)}if(d=l-a,!(!h&&d<0)){if(d/=h,h<0){if(d>f)return;d>o&&(o=d)}else if(h>0){if(d<o)return;d<f&&(f=d)}return o>0&&(n[0]=c+o*s,n[1]=a+o*h),f<1&&(t[0]=c+f*s,t[1]=a+f*h),!0}}}}}var _n=1e9,An=-_n;function Qi(n,t,e,i){function r(u,o){return n<=u&&u<=e&&t<=o&&o<=i}function l(u,o,f,s){var h=0,d=0;if(u==null||(h=c(u,f))!==(d=c(o,f))||p(u,o)<0^f>0)do s.point(h===0||h===3?n:e,h>1?i:t);while((h=(h+f+4)%4)!==d);else s.point(o[0],o[1])}function c(u,o){return Z(u[0]-n)<A?o>0?0:3:Z(u[0]-e)<A?o>0?2:1:Z(u[1]-t)<A?o>0?1:0:o>0?3:2}function a(u,o){return p(u.x,o.x)}function p(u,o){var f=c(u,1),s=c(o,1);return f!==s?f-s:f===0?o[1]-u[1]:f===1?u[0]-o[0]:f===2?u[1]-o[1]:o[0]-u[0]}return function(u){var o=u,f=Jt(),s,h,d,v,m,P,w,x,S,N,E,b={point:z,lineStart:M,lineEnd:R,polygonStart:L,polygonEnd:_};function z(g,k){r(g,k)&&o.point(g,k)}function y(){for(var g=0,k=0,I=h.length;k<I;++k)for(var F=h[k],j=1,q=F.length,W=F[0],D,Y,U=W[0],tn=W[1];j<q;++j)D=U,Y=tn,W=F[j],U=W[0],tn=W[1],Y<=i?tn>i&&(U-D)*(i-Y)>(tn-Y)*(n-D)&&++g:tn<=i&&(U-D)*(i-Y)<(tn-Y)*(n-D)&&--g;return g}function L(){o=f,s=[],h=[],E=!0}function _(){var g=y(),k=E&&g,I=(s=Yt(s)).length;(k||I)&&(u.polygonStart(),k&&(u.lineStart(),l(null,null,1,u),u.lineEnd()),I&&Kt(s,a,g,l,u),u.polygonEnd()),o=u,s=h=d=null}function M(){b.point=$,h&&h.push(d=[]),N=!0,S=!1,w=x=NaN}function R(){s&&($(v,m),P&&S&&f.rejoin(),s.push(f.result())),b.point=z,S&&o.lineEnd()}function $(g,k){var I=r(g,k);if(h&&d.push([g,k]),N)v=g,m=k,P=I,N=!1,I&&(o.lineStart(),o.point(g,k));else if(I&&S)o.point(g,k);else{var F=[w=Math.max(An,Math.min(_n,w)),x=Math.max(An,Math.min(_n,x))],j=[g=Math.max(An,Math.min(_n,g)),k=Math.max(An,Math.min(_n,k))];Ki(F,j,n,t,e,i)?(S||(o.lineStart(),o.point(F[0],F[1])),o.point(j[0],j[1]),I||o.lineEnd(),E=!1):I&&(o.lineStart(),o.point(g,k),E=!1)}w=g,x=k,S=I}return b}}const rt=n=>n;var Dn=new fn,ot=new fn,ni,ti,at,ut,an={point:Q,lineStart:Q,lineEnd:Q,polygonStart:function(){an.lineStart=ne,an.lineEnd=ie},polygonEnd:function(){an.lineStart=an.lineEnd=an.point=Q,Dn.add(Z(ot)),ot=new fn},result:function(){var n=Dn/2;return Dn=new fn,n}};function ne(){an.point=te}function te(n,t){an.point=ii,ni=at=n,ti=ut=t}function ii(n,t){ot.add(ut*n-at*t),at=n,ut=t}function ie(){ii(ni,ti)}var En=1/0,Vn=En,Rn=-En,Gn=Rn,Bn={point:ee,lineStart:Q,lineEnd:Q,polygonStart:Q,polygonEnd:Q,result:function(){var n=[[En,Vn],[Rn,Gn]];return Rn=Gn=-(Vn=En=1/0),n}};function ee(n,t){n<En&&(En=n),n>Rn&&(Rn=n),t<Vn&&(Vn=t),t>Gn&&(Gn=t)}var lt=0,ct=0,wn=0,Xn=0,Un=0,mn=0,ft=0,st=0,Mn=0,ei,ri,rn,on,J={point:pn,lineStart:bt,lineEnd:Lt,polygonStart:function(){J.lineStart=ae,J.lineEnd=ue},polygonEnd:function(){J.point=pn,J.lineStart=bt,J.lineEnd=Lt},result:function(){var n=Mn?[ft/Mn,st/Mn]:mn?[Xn/mn,Un/mn]:wn?[lt/wn,ct/wn]:[NaN,NaN];return lt=ct=wn=Xn=Un=mn=ft=st=Mn=0,n}};function pn(n,t){lt+=n,ct+=t,++wn}function bt(){J.point=re}function re(n,t){J.point=oe,pn(rn=n,on=t)}function oe(n,t){var e=n-rn,i=t-on,r=un(e*e+i*i);Xn+=r*(rn+n)/2,Un+=r*(on+t)/2,mn+=r,pn(rn=n,on=t)}function Lt(){J.point=pn}function ae(){J.point=le}function ue(){oi(ei,ri)}function le(n,t){J.point=oi,pn(ei=rn=n,ri=on=t)}function oi(n,t){var e=n-rn,i=t-on,r=un(e*e+i*i);Xn+=r*(rn+n)/2,Un+=r*(on+t)/2,mn+=r,r=on*n-rn*t,ft+=r*(rn+n),st+=r*(on+t),Mn+=r*3,pn(rn=n,on=t)}function ai(n){this._context=n}ai.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,nn);break}}},result:Q};var pt=new fn,Jn,ui,li,xn,Nn,Pn={point:Q,lineStart:function(){Pn.point=ce},lineEnd:function(){Jn&&ci(ui,li),Pn.point=Q},polygonStart:function(){Jn=!0},polygonEnd:function(){Jn=null},result:function(){var n=+pt;return pt=new fn,n}};function ce(n,t){Pn.point=ci,ui=xn=n,li=Nn=t}function ci(n,t){xn-=n,Nn-=t,pt.add(un(xn*xn+Nn*Nn)),xn=n,Nn=t}let It,Wn,Ot,Zt;class qt{constructor(t){this._append=t==null?fi:fe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:{this._append`M${t},${e}`,this._point=1;break}case 1:{this._append`L${t},${e}`;break}default:{if(this._append`M${t},${e}`,this._radius!==Ot||this._append!==Wn){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Ot=i,Wn=this._append,Zt=this._,this._=r}this._+=Zt;break}}}result(){const t=this._;return this._="",t.length?t:null}}function fi(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function fe(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return fi;if(t!==It){const e=10**t;It=t,Wn=function(r){let l=1;this._+=r[0];for(const c=r.length;l<c;++l)this._+=Math.round(arguments[l]*e)/e+r[l]}}return Wn}function se(n,t){let e=3,i=4.5,r,l;function c(a){return a&&(typeof i=="function"&&l.pointRadius(+i.apply(this,arguments)),gn(a,r(l))),l.result()}return c.area=function(a){return gn(a,r(an)),an.result()},c.measure=function(a){return gn(a,r(Pn)),Pn.result()},c.bounds=function(a){return gn(a,r(Bn)),Bn.result()},c.centroid=function(a){return gn(a,r(J)),J.result()},c.projection=function(a){return arguments.length?(r=a==null?(n=null,rt):(n=a).stream,c):n},c.context=function(a){return arguments.length?(l=a==null?(t=null,new qt(e)):new ai(t=a),typeof i!="function"&&l.pointRadius(i),c):t},c.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(l.pointRadius(+a),+a),c):i},c.digits=function(a){if(!arguments.length)return e;if(a==null)e=null;else{const p=Math.floor(a);if(!(p>=0))throw new RangeError(`invalid digits: ${a}`);e=p}return t===null&&(l=new qt(e)),c},c.projection(n).digits(e).context(t)}function mt(n){return function(t){var e=new ht;for(var i in n)e[i]=n[i];return e.stream=t,e}}function ht(){}ht.prototype={constructor:ht,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function vt(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),gn(e,n.stream(Bn)),t(Bn.result()),i!=null&&n.clipExtent(i),n}function St(n,t,e){return vt(n,function(i){var r=t[1][0]-t[0][0],l=t[1][1]-t[0][1],c=Math.min(r/(i[1][0]-i[0][0]),l/(i[1][1]-i[0][1])),a=+t[0][0]+(r-c*(i[1][0]+i[0][0]))/2,p=+t[0][1]+(l-c*(i[1][1]+i[0][1]))/2;n.scale(150*c).translate([a,p])},e)}function si(n,t,e){return St(n,[[0,0],t],e)}function pi(n,t,e){return vt(n,function(i){var r=+t,l=r/(i[1][0]-i[0][0]),c=(r-l*(i[1][0]+i[0][0]))/2,a=-l*i[0][1];n.scale(150*l).translate([c,a])},e)}function hi(n,t,e){return vt(n,function(i){var r=+t,l=r/(i[1][1]-i[0][1]),c=-l*i[0][0],a=(r-l*(i[1][1]+i[0][1]))/2;n.scale(150*l).translate([c,a])},e)}var Ht=16,pe=H(30*X);function Vt(n,t){return+t?de(n,t):he(n)}function he(n){return mt({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function de(n,t){function e(i,r,l,c,a,p,u,o,f,s,h,d,v,m){var P=u-i,w=o-r,x=P*P+w*w;if(x>4*t&&v--){var S=c+s,N=a+h,E=p+d,b=un(S*S+N*N+E*E),z=sn(E/=b),y=Z(Z(E)-1)<A||Z(l-f)<A?(l+f)/2:Sn(N,S),L=n(y,z),_=L[0],M=L[1],R=_-i,$=M-r,g=w*R-P*$;(g*g/x>t||Z((P*R+w*$)/x-.5)>.3||c*s+a*h+p*d<pe)&&(e(i,r,l,c,a,p,_,M,y,S/=b,N/=b,E,v,m),m.point(_,M),e(_,M,y,S,N,E,u,o,f,s,h,d,v,m))}}return function(i){var r,l,c,a,p,u,o,f,s,h,d,v,m={point:P,lineStart:w,lineEnd:S,polygonStart:function(){i.polygonStart(),m.lineStart=N},polygonEnd:function(){i.polygonEnd(),m.lineStart=w}};function P(z,y){z=n(z,y),i.point(z[0],z[1])}function w(){f=NaN,m.point=x,i.lineStart()}function x(z,y){var L=yn([z,y]),_=n(z,y);e(f,s,o,h,d,v,f=_[0],s=_[1],o=z,h=L[0],d=L[1],v=L[2],Ht,i),i.point(f,s)}function S(){m.point=P,i.lineEnd()}function N(){w(),m.point=E,m.lineEnd=b}function E(z,y){x(r=z,y),l=f,c=s,a=h,p=d,u=v,m.point=x}function b(){e(f,s,o,h,d,v,l,c,r,a,p,u,Ht,i),m.lineEnd=S,S()}return m}}var ge=mt({point:function(n,t){this.stream.point(n*X,t*X)}});function me(n){return mt({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function ve(n,t,e,i,r){function l(c,a){return c*=i,a*=r,[t+n*c,e-n*a]}return l.invert=function(c,a){return[(c-t)/n*i,(e-a)/n*r]},l}function Gt(n,t,e,i,r,l){if(!l)return ve(n,t,e,i,r);var c=H(l),a=O(l),p=c*n,u=a*n,o=c/n,f=a/n,s=(a*e-c*t)/n,h=(a*t+c*e)/n;function d(v,m){return v*=i,m*=r,[p*v-u*m+t,e-u*v-p*m]}return d.invert=function(v,m){return[i*(o*v-f*m+s),r*(h-f*v-o*m)]},d}function Se(n){var t,e=150,i=480,r=250,l=0,c=0,a=0,p=0,u=0,o,f=0,s=1,h=1,d=null,v=jt,m=null,P,w,x,S=rt,N=.5,E,b,z,y,L;function _(g){return z(g[0]*X,g[1]*X)}function M(g){return g=z.invert(g[0],g[1]),g&&[g[0]*en,g[1]*en]}_.stream=function(g){return y&&L===g?y:y=ge(me(o)(v(E(S(L=g)))))},_.preclip=function(g){return arguments.length?(v=g,d=void 0,$()):v},_.postclip=function(g){return arguments.length?(S=g,m=P=w=x=null,$()):S},_.clipAngle=function(g){return arguments.length?(v=+g?Ji(d=g*X):(d=null,jt),$()):d*en},_.clipExtent=function(g){return arguments.length?(S=g==null?(m=P=w=x=null,rt):Qi(m=+g[0][0],P=+g[0][1],w=+g[1][0],x=+g[1][1]),$()):m==null?null:[[m,P],[w,x]]},_.scale=function(g){return arguments.length?(e=+g,R()):e},_.translate=function(g){return arguments.length?(i=+g[0],r=+g[1],R()):[i,r]},_.center=function(g){return arguments.length?(l=g[0]%360*X,c=g[1]%360*X,R()):[l*en,c*en]},_.rotate=function(g){return arguments.length?(a=g[0]%360*X,p=g[1]%360*X,u=g.length>2?g[2]%360*X:0,R()):[a*en,p*en,u*en]},_.angle=function(g){return arguments.length?(f=g%360*X,R()):f*en},_.reflectX=function(g){return arguments.length?(s=g?-1:1,R()):s<0},_.reflectY=function(g){return arguments.length?(h=g?-1:1,R()):h<0},_.precision=function(g){return arguments.length?(E=Vt(b,N=g*g),$()):un(N)},_.fitExtent=function(g,k){return St(_,g,k)},_.fitSize=function(g,k){return si(_,g,k)},_.fitWidth=function(g,k){return pi(_,g,k)},_.fitHeight=function(g,k){return hi(_,g,k)};function R(){var g=Gt(e,0,0,s,h,f).apply(null,t(l,c)),k=Gt(e,i-g[0],r-g[1],s,h,f);return o=Gi(a,p,u),b=it(t,k),z=it(o,b),E=Vt(b,N),$()}function $(){return y=L=null,_}return function(){return t=n.apply(this,arguments),_.invert=t.invert&&M,R()}}function ye(n){var t=0,e=C/3,i=Se(n),r=i(t,e);return r.parallels=function(l){return arguments.length?i(t=l[0]*X,e=l[1]*X):[t*en,e*en]},r}function Ee(n){var t=H(n);function e(i,r){return[i*t,O(r)/t]}return e.invert=function(i,r){return[i/t,sn(r*t)]},e}function _e(n,t){var e=O(n),i=(e+O(t))/2;if(Z(i)<A)return Ee(n);var r=1+e*(2*i-e),l=un(r)/i;function c(a,p){var u=un(r-2*i*O(p))/i;return[u*O(a*=i),l-u*H(a)]}return c.invert=function(a,p){var u=l-p,o=Sn(a,Z(u))*jn(u);return u*i<0&&(o-=C*jn(a)*jn(u)),[o/i,sn((r-(a*a+u*u)*i*i)/(2*i))]},c}function dt(){return ye(_e).scale(155.424).center([0,33.6442])}function we(){return dt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Me(n){var t=n.length;return{point:function(e,i){for(var r=-1;++r<t;)n[r].point(e,i)},sphere:function(){for(var e=-1;++e<t;)n[e].sphere()},lineStart:function(){for(var e=-1;++e<t;)n[e].lineStart()},lineEnd:function(){for(var e=-1;++e<t;)n[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<t;)n[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<t;)n[e].polygonEnd()}}}function xe(){var n,t,e=we(),i,r=dt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l,c=dt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,p,u={point:function(s,h){p=[s,h]}};function o(s){var h=s[0],d=s[1];return p=null,i.point(h,d),p||(l.point(h,d),p)||(a.point(h,d),p)}o.invert=function(s){var h=e.scale(),d=e.translate(),v=(s[0]-d[0])/h,m=(s[1]-d[1])/h;return(m>=.12&&m<.234&&v>=-.425&&v<-.214?r:m>=.166&&m<.234&&v>=-.214&&v<-.115?c:e).invert(s)},o.stream=function(s){return n&&t===s?n:n=Me([e.stream(t=s),r.stream(s),c.stream(s)])},o.precision=function(s){return arguments.length?(e.precision(s),r.precision(s),c.precision(s),f()):e.precision()},o.scale=function(s){return arguments.length?(e.scale(s),r.scale(s*.35),c.scale(s),o.translate(e.translate())):e.scale()},o.translate=function(s){if(!arguments.length)return e.translate();var h=e.scale(),d=+s[0],v=+s[1];return i=e.translate(s).clipExtent([[d-.455*h,v-.238*h],[d+.455*h,v+.238*h]]).stream(u),l=r.translate([d-.307*h,v+.201*h]).clipExtent([[d-.425*h+A,v+.12*h+A],[d-.214*h-A,v+.234*h-A]]).stream(u),a=c.translate([d-.205*h,v+.212*h]).clipExtent([[d-.214*h+A,v+.166*h+A],[d-.115*h-A,v+.234*h-A]]).stream(u),f()},o.fitExtent=function(s,h){return St(o,s,h)},o.fitSize=function(s,h){return si(o,s,h)},o.fitWidth=function(s,h){return pi(o,s,h)},o.fitHeight=function(s,h){return hi(o,s,h)};function f(){return n=t=null,o}return o.scale(1070)}function Ne(n,t,e,i){var r=$i(n,t,e),l;switch(i=On(i??",f"),i.type){case"s":{var c=Math.max(Math.abs(n),Math.abs(t));return i.precision==null&&!isNaN(l=Zi(r,c))&&(i.precision=l),Dt(i,c)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(l=qi(r,Math.max(Math.abs(n),Math.abs(t))))&&(i.precision=l-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(l=Oi(r))&&(i.precision=l-(i.type==="%")*2);break}}return Tt(i)}function Re(n){var t=n.domain;return n.ticks=function(e){var i=t();return Pi(i[0],i[i.length-1],e??10)},n.tickFormat=function(e,i){var r=t();return Ne(r[0],r[r.length-1],e??10,i)},n.nice=function(e){e==null&&(e=10);var i=t(),r=0,l=i.length-1,c=i[r],a=i[l],p,u,o=10;for(a<c&&(u=c,c=a,a=u,u=r,r=l,l=u);o-- >0;){if(u=Kn(c,a,e),u===p)return i[r]=c,i[l]=a,t(i);if(u>0)c=Math.floor(c/u)*u,a=Math.ceil(a/u)*u;else if(u<0)c=Math.ceil(c*u)/u,a=Math.floor(a*u)/u;else break;p=u}return n},n}function di(){var n=0,t=1,e=1,i=[.5],r=[0,1],l;function c(p){return p!=null&&p<=p?r[Mi(i,p,0,e)]:l}function a(){var p=-1;for(i=new Array(e);++p<e;)i[p]=((p+1)*t-(p-e)*n)/(e+1);return c}return c.domain=function(p){return arguments.length?([n,t]=p,n=+n,t=+t,a()):[n,t]},c.range=function(p){return arguments.length?(e=(r=Array.from(p)).length-1,a()):r.slice()},c.invertExtent=function(p){var u=r.indexOf(p);return u<0?[NaN,NaN]:u<1?[n,i[0]]:u>=e?[i[e-1],t]:[i[u-1],i[u]]},c.unknown=function(p){return arguments.length&&(l=p),c},c.thresholds=function(){return i.slice()},c.copy=function(){return di().domain([n,t]).range(r).unknown(l)},gi.apply(Re(c),arguments)}function Pe(n){return n}function $e(n){if(n==null)return Pe;var t,e,i=n.scale[0],r=n.scale[1],l=n.translate[0],c=n.translate[1];return function(a,p){p||(t=e=0);var u=2,o=a.length,f=new Array(o);for(f[0]=(t+=a[0])*i+l,f[1]=(e+=a[1])*r+c;u<o;)f[u]=a[u],++u;return f}}function ke(n,t){for(var e,i=n.length,r=i-t;r<--i;)e=n[r],n[r++]=n[i],n[i]=e}function Bt(n,t){return typeof t=="string"&&(t=n.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(e){return Xt(n,e)})}:Xt(n,t)}function Xt(n,t){var e=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,l=ze(n,t);return e==null&&i==null?{type:"Feature",properties:r,geometry:l}:i==null?{type:"Feature",id:e,properties:r,geometry:l}:{type:"Feature",id:e,bbox:i,properties:r,geometry:l}}function ze(n,t){var e=$e(n.transform),i=n.arcs;function r(o,f){f.length&&f.pop();for(var s=i[o<0?~o:o],h=0,d=s.length;h<d;++h)f.push(e(s[h],h));o<0&&ke(f,d)}function l(o){return e(o)}function c(o){for(var f=[],s=0,h=o.length;s<h;++s)r(o[s],f);return f.length<2&&f.push(f[0]),f}function a(o){for(var f=c(o);f.length<4;)f.push(f[0]);return f}function p(o){return o.map(a)}function u(o){var f=o.type,s;switch(f){case"GeometryCollection":return{type:f,geometries:o.geometries.map(u)};case"Point":s=l(o.coordinates);break;case"MultiPoint":s=o.coordinates.map(l);break;case"LineString":s=c(o.arcs);break;case"MultiLineString":s=o.arcs.map(c);break;case"Polygon":s=p(o.arcs);break;case"MultiPolygon":s=o.arcs.map(p);break;default:return null}return{type:f,coordinates:s}}return u(t)}const Ce={backgroundColor:"#f8f9fa",stateStroke:"#2d3748",stateFill:"#e2e8f0",stateStrokeWidth:.5,stateHoverFill:"#cbd5e0",pointColor:"#E64833",pointRadius:2,pointOpacity:.7,pointHoverRadius:4,pointHoverOpacity:1},Ae={type:"albersUsa",scale:1e3,translate:[400,300]},Fe={enabled:!0,backgroundColor:"#1a202c",textColor:"#ffffff",borderColor:"#E64833",borderRadius:"4px",padding:"8px 12px",fontSize:"13px"},je={enabled:!0,scaleExtent:[1,8],translateExtent:[[-100,-100],[900,700]]},Ut={enabled:!0,colorScheme:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],minValue:0,maxValue:25,opacity:.7};function Oe({data:n,topology:t,countyTopology:e,countyData:i,choroplethConfig:r={},mapStyleConfig:l={},projectionConfig:c={},tooltipConfig:a={},zoomConfig:p={},width:u=960,height:o=600,minWidth:f=800,minHeight:s=500,enableZoom:h=!0,enableTooltip:d=!0,onSiteClick:v,onSiteHover:m,className:P="",tooltipClassName:w=""}){var I;const x=dn.useRef(null),S=dn.useRef(null),N=dn.useRef(null),E=dn.useRef(1),[b,z]=dn.useState(null),y={...Ce,...l},L={...Ae,...c},_={...Fe,...a},M={...je,...p},R={...Ut,...r},$=()=>{if(N.current){const{svg:F,zoom:j}=N.current;F.transition().duration(300).call(j.scaleBy,1.5)}},g=()=>{if(N.current){const{svg:F,zoom:j}=N.current;F.transition().duration(300).call(j.scaleBy,.67)}},k=()=>{if(N.current){const{svg:F,zoom:j}=N.current;F.transition().duration(500).call(j.transform,mi)}};return dn.useEffect(()=>{if(x.current)try{const F=cn(x.current),j=S.current?cn(S.current):null;F.selectAll("*").remove();const q=F.append("g").attr("class","us-map__main-group"),W=xe().scale(L.scale||1e3).translate(L.translate||[u/2,o/2]),D=se().projection(W);if(e&&i&&R.enabled){const V=Bt(e,e.objects.counties),G=di().domain([R.minValue||0,R.maxValue||25]).range(R.colorScheme||Ut.colorScheme);q.append("g").attr("class","us-map__counties").selectAll("path").data(V.features).join("path").attr("class","us-map__county").attr("d",D).attr("fill",T=>{const hn=T.id,ln=i[hn];return ln?G(ln.povertyRate):"#e2e8f0"}).attr("opacity",R.opacity||.7).attr("stroke","#fff").attr("stroke-width",.25)}const Y=Bt(t,t.objects.states);q.append("g").attr("class","us-map__states").selectAll("path").data(Y.features).join("path").attr("class","us-map__state").attr("d",D).attr("fill",e&&i&&R.enabled?"none":y.stateFill).attr("stroke",y.stateStroke).attr("stroke-width",e&&i&&R.enabled?1.5:y.stateStrokeWidth).on("mouseenter",function(){y.stateHoverFill&&!(e&&i&&R.enabled)&&cn(this).attr("fill",y.stateHoverFill)}).on("mouseleave",function(){e&&i&&R.enabled||cn(this).attr("fill",y.stateFill)});const U=q.append("g").attr("class","us-map__points"),tn=n.sites.map(V=>{const G=W(V.coordinates);return G?{site:V,px:G[0],py:G[1]}:null}).filter(V=>V!==null),yt=8;if(U.selectAll("circle.us-map__point-hit").data(tn).join("circle").attr("class","us-map__point-hit").attr("cx",V=>V.px).attr("cy",V=>V.py).attr("r",yt).attr("data-target-r",yt).attr("fill","transparent").attr("opacity",0).style("cursor","pointer").on("mouseenter",function(V,G){const T=E.current,hn=tn.indexOf(G),ln=cn(U.selectAll("circle.us-map__point").nodes()[hn]);y.pointHoverRadius&&ln.attr("r",y.pointHoverRadius/T).attr("data-target-r",y.pointHoverRadius),y.pointHoverOpacity!==void 0&&ln.attr("opacity",y.pointHoverOpacity),ln.attr("stroke-width",2.5/T).attr("stroke","#2d3748"),d&&j&&j.style("opacity","1").classed("us-map__tooltip--visible",!0).html(`
                  <div class="us-map__tooltip-content">
                    <div class="us-map__tooltip-name">${G.site.name}</div>
                    <div class="us-map__tooltip-detail">${G.site.address}</div>
                    <div class="us-map__tooltip-detail">${G.site.county}, ${G.site.state}</div>
                  </div>
                `),m&&m(G.site)}).on("mousemove",function(V){if(d&&j){const[G,T]=vi(V,x.current);j.style("left",`${G+15}px`).style("top",`${T-35}px`)}}).on("mouseleave",function(V,G){const T=E.current,hn=tn.indexOf(G);cn(U.selectAll("circle.us-map__point").nodes()[hn]).attr("r",y.pointRadius/T).attr("data-target-r",y.pointRadius).attr("opacity",y.pointOpacity).attr("stroke-width",1.5/T).attr("stroke","#718096"),d&&j&&j.style("opacity","0").classed("us-map__tooltip--visible",!1),m&&m(null)}).on("click",function(V,G){v&&v(G.site)}),U.selectAll("circle.us-map__point").data(tn).join("circle").attr("class","us-map__point").attr("cx",V=>V.px).attr("cy",V=>V.py).attr("r",y.pointRadius).attr("data-target-r",y.pointRadius).attr("fill",y.pointColor).attr("opacity",y.pointOpacity).attr("stroke","#718096").attr("stroke-width",1.5).style("pointer-events","none"),h){const V=Si().scaleExtent(M.scaleExtent||[1,8]).translateExtent(M.translateExtent||[[-100,-100],[u+100,o+100]]).on("zoom",G=>{const T=G.transform.k;E.current=T,q.attr("transform",G.transform.toString()),U.selectAll("circle").attr("r",function(){return parseFloat(cn(this).attr("data-target-r")||y.pointRadius.toString())/T}),U.selectAll("circle.us-map__point").attr("stroke-width",1.5/T)});F.call(V),N.current={zoom:V,svg:F,g:q}}}catch(F){console.error("Error rendering map:",F),z("Failed to render map")}},[n,t,e,i,u,o,y,L,_,M,R,h,d,v,m]),b?B.jsx("div",{className:"us-map__error",children:b}):B.jsxs("div",{className:`us-map ${P}`.trim(),children:[h&&B.jsxs("div",{className:"us-map__zoom-controls",children:[B.jsx("button",{className:"us-map__zoom-button",onClick:$,title:"Zoom in","aria-label":"Zoom in",children:"+"}),B.jsx("button",{className:"us-map__zoom-button",onClick:g,title:"Zoom out","aria-label":"Zoom out",children:"−"}),B.jsx("div",{className:"us-map__zoom-divider"}),B.jsx("button",{className:"us-map__zoom-button",onClick:k,title:"Reset zoom","aria-label":"Reset zoom",style:{fontSize:"14px"},children:"⟲"})]}),B.jsx("svg",{ref:x,className:"us-map__svg",width:u,height:o,style:{minWidth:`${f}px`,minHeight:`${s}px`,backgroundColor:y.backgroundColor}}),d&&B.jsx("div",{ref:S,className:`us-map__tooltip ${w}`.trim(),style:{backgroundColor:_.backgroundColor,color:_.textColor,border:`1px solid ${_.borderColor}`,borderRadius:_.borderRadius,padding:_.padding,fontSize:_.fontSize}}),e&&i&&R.enabled&&B.jsxs("div",{className:"us-map__legend",children:[B.jsx("div",{className:"us-map__legend-title",children:"County Poverty Rate (%)"}),B.jsx("div",{className:"us-map__legend-scale",children:(I=R.colorScheme)==null?void 0:I.map((F,j)=>{var U;const q=R.minValue||0,D=((R.maxValue||25)-q)/(((U=R.colorScheme)==null?void 0:U.length)||1),Y=q+D*j;return B.jsxs("div",{className:"us-map__legend-item",children:[B.jsx("div",{className:"us-map__legend-color",style:{backgroundColor:F}}),B.jsx("div",{className:"us-map__legend-label",children:Y.toFixed(0)})]},j)})})]})]})}export{Oe as U};
